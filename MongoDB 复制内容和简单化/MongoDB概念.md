### mongodb

#### 命令行启动须在bin文件夹内，环境变量失效 ？？？



| Mongo命令               |                          |
| ----------------------- | ------------------------ |
| net start/stop MongoDB  | 启动和停止               |
| mongo                   | 进入控制台               |
| db                      | 查看当前数据库对象或集合 |
| db.myfile.insert({x:y}) | 插入数据                 |
| show dbs                | 显示所有数据库的列表     |
| use mymongo             | 连接到指定数据库         |
|                         |                          |



#### mogodb概念：

| SQL术语     | mongodb术语 | 说明                             |
| ----------- | ----------- | -------------------------------- |
| database    | database    | 数据库                           |
| table       | collection  | 数据库表/集合                    |
| row         | document    | 数据记录行/文档                  |
| colume      | field       | 数据字段/域                      |
| index       | index       | 索引                             |
| table joins |             | 表连接，mongo不支持              |
| primary key | primary key | 主键，momgo自动设置_id字段为主键 |



#### 数据库

mongo默认数据库为 db，在data文件夹中(手动创建)

数据库名：不能是空字符串；不得含有:  空格  . $  /  \和\0(空字符)；全部小写；最多64字节

**保留数据库：** 

admin(root数据库)，所有数据库所有权限

local(永远不会被复制，存储本地单台服务器任意集合)

config(，mongo用于分片时，内部使用，保存分片信息)



### 文档

一对键值对(key:value),即BSON：不需要设置相同的字段，相同的字段也不需要相同的数据类型

文档中值的类型广泛，可以是其他，甚至是文档

文档不能有重复的键，键是字符串

mongo区分类型和大小写



**文档键的命名规范：**

不能含有\0,这个表示键的结尾

.和$在特定环境下才能使用

以_开头的健是保留的（不严格要求）



### 集合

集合就是mongodb文档组，存在于数据库中，没有固定结构，可以插入不同格式和内容的数据

**集合命名规范：**

不能是空字符串""

不能含有\0 ，这表示集合结尾

不能以system.开头，这是系统集合保留的2前缀

不能含有保留字符，比如$，除非你要访问这种系统创建的集合





**capped  collection**

高性能，队列过期特性（按照插入顺序），适合记录日志的功能，固定大小的collection

显式创建，指定大小(字节)   

```linux
db.createCollection("mycoll",{capped:true,size:10000})
```

更新后的文档不可以超过之前文档的大小(不能增加存储空间)

不能删除问文档，但能用drop()方法删除collection所有行

删除之后，必须显式的重新创建这个collection



### 元数据

























